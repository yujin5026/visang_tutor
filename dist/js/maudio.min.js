function maudio(i){var a={obj:i.obj?i.obj:"audio",fastStep:i.fastStep?i.fastStep:10,tpl:'    <div class="maudio">      <audio src="" initaudio="false"></audio>      <div class="audio-control">          <a href="javascript:;" class="fast-reverse"></a>          <a href="javascript:;" class="play"></a>          <a href="javascript:;" class="fast-forward"></a>          <div class="progress-bar">              <div class="progress-pass"></div>          </div>          <div class="time-keep">              <span class="current-time">00:00</span> / <span class="duration">00:00</span>          </div>          <a class="mute"></a>          <div class="volume-bar">              <div class="volume-pass"></div>          </div>      </div>    </div>'},o=$(a.obj).parents(window);function r(i){var a=parseInt(i/60),o=parseInt(i%60);return(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)}$(a.obj).parent(".maudio").length&&$(a.obj).next("div.audio-control").length||(window.tDuration=window.tDuration?window.tDuration:{},$(a.obj).each(function(i){$(this).before(a.tpl);var o=$(this).prev("div.maudio"),t=o.children("audio")[0];t.src=$(this).attr("src")||$(this).children("source").attr("src"),window.tDuration[a.obj+t.src+"_"+i]=setInterval(function(){t.duration&&(o.find(".time-keep .duration").text(r(t.duration)),clearInterval(window.tDuration[a.obj+t.src+"_"+i]))},100),$(this).remove()})),$(o).find(".audio-control .play").off("click"),$(o).find(".audio-control .play").on("click",function(){var i=$(this).parent(".audio-control").parent(".maudio"),a=i.children("audio")[0];i.hasClass("playing")?(a.pause(),i.removeClass("playing")):($(o).find(".playing").each(function(){$(this).children("audio")[0].pause(),$(this).removeClass("playing")}),a.play(),i.addClass("playing"),currentAudio=a,currentAudioBox=i,window.t=window.setInterval(function(){var i;i=100*currentAudio.currentTime/currentAudio.duration,currentAudioBox.find(".progress-pass").css({width:i+"%"}),currentAudioBox.find(".current-time").text(r(currentAudio.currentTime)),currentAudio.currentTime>=currentAudio.duration&&(currentAudioBox.removeClass("playing"),clearInterval(t))},500))}),$(o).find(".audio-control .fast-reverse").off("click"),$(o).find(".audio-control .fast-reverse").on("click",function(){currentAudio.currentTime-=a.fastStep}),$(o).find(".audio-control .fast-forward").off("click"),$(o).find(".audio-control .fast-forward").on("click",function(){currentAudio.currentTime+=a.fastStep}),$(o).find(".audio-control .volume-bar").off("click"),$(o).find(".audio-control .volume-bar").on("click",function(i){var a=$(this).parent(".audio-control").parent(".maudio"),o=a.children("audio")[0],r=i.offsetX/a.find(".volume-bar").width();a.find(".volume-pass").css({width:100*r+"%"}),o.volume=r>1?1:r}),$(o).find(".audio-control .mute").off("click"),$(o).find(".audio-control .mute").on("click",function(i){var a=$(this).parent(".audio-control").parent(".maudio").children("audio")[0];$(this).hasClass("muted")?(a.muted=!1,$(this).removeClass("muted")):(a.muted=!0,$(this).addClass("muted"))}),$(o).find(".audio-control .progress-bar").off("click"),$(o).find(".audio-control .progress-bar").on("click",function(i){var a=$(this).parent(".audio-control").parent(".maudio"),o=a.children("audio")[0],t=i.offsetX/a.find(".progress-bar").width();a.find(".progress-pass").css({width:100*t+"%"}),o.currentTime=o.duration*t,a.find(".current-time").text(r(o.currentTime))}),$(o).find(".maudio audio").off("play"),$(o).find(".maudio audio").on("play",function(){$(this).parent(".maudio").hasClass("playing")||$(this).parent(".maudio").addClass("playing")}),$(o).find(".maudio audio").off("pause"),$(o).find(".maudio audio").on("pause",function(){$(this).parent(".maudio").hasClass("playing")&&$(this).parent(".maudio").removeClass("playing")})}